SELECT purchase_invoices.purchase_invoice_id, purchase_invoices.vendor_id, db_palm_business.vendors.enterprise_name, purchase_invoices.invoice_number, purchase_invoices.total_amount, COALESCE(SUM(payments_receipts.amount), 0) AS payed_amount, (purchase_invoices.total_amount - COALESCE(SUM(payments_receipts.amount), 0)) AS remaining_amount FROM purchase_invoices LEFT JOIN vendors ON purchase_invoices.vendor_id = vendors.vendor_id LEFT JOIN payments_receipts ON purchase_invoices.invoice_number = payments_receipts.invoice_number AND purchase_invoices.vendor_id = payments_receipts.vendor_customer WHERE purchase_invoices.enterprise_id = 'ENP1110180948VF' GROUP BY purchase_invoices.invoice_number